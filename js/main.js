import { loadFooterSite, loadMenuSite } from "./core/include.js";
import { loadMegaMenuNavbar } from "./ui/megaMenu.js";
import { accordionToggle } from "./ui/accordion.js";
import { getToken } from "./core/utils.js";

const userToken = getToken()

window.addEventListener('load', () => {
  loadFooterSite()
  loadMenuSite()
  loadMegaMenuNavbar()
  accordionToggle()
})

const menuMobileToggleIcon = document.querySelector('.toggle-menu')
const categoryListItemsElem = document.querySelector('#list-items')



categoryListItemsElem.addEventListener('click', e => {
  document.querySelector('.mega-menu-mobile').classList.toggle('mega-menu-mobile--open')
  document.querySelector('.sss').classList.toggle('sss-open')
})

menuMobileToggleIcon.addEventListener('click', e => {
  document.querySelector('.menu-mobile').classList.toggle('menu-mobile--open')

  const openMenuBtn = document.querySelector('#open')
  const closeMenuBtn = document.querySelector('#close')

  if (closeMenuBtn.className === 'humbrger-icon-toggle') {
    openMenuBtn.classList.add('humbrger-icon-toggle')
    closeMenuBtn.classList.remove('humbrger-icon-toggle')
  } else {
    openMenuBtn.classList.remove('humbrger-icon-toggle')
    closeMenuBtn.classList.add('humbrger-icon-toggle')
  }
})


// * Load User Icon Or Register Btn ============================================

const registerBtnContainer = document.querySelector('.register-btn-wrapper')

registerBtnContainer.innerHTML = ''

registerBtnContainer.insertAdjacentHTML('beforeend',
  `
    
          ${!userToken ? `<a class="user-profile" href="./login.html">
                             <span>ثبت نام / ورود</span>
                         </a>` : ` <a href="./profile.html" class="user-icon">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M32.6967 35.4168C32.6967 29.4135 26.0033 24.5335 20 24.5335C13.9967 24.5335 7.30334 29.4135 7.30334 35.4168M20 19.0935C21.9242 19.0935 23.7695 18.3291 25.1301 16.9686C26.4906 15.608 27.255 13.7626 27.255 11.8385C27.255 9.91435 26.4906 8.06901 25.1301 6.70844C23.7695 5.34786 21.9242 4.5835 20 4.5835C18.0759 4.5835 16.2305 5.34786 14.87 6.70844C13.5094 8.06901 12.745 9.91435 12.745 11.8385C12.745 13.7626 13.5094 15.608 14.87 16.9686C16.2305 18.3291 18.0759 19.0935 20 19.0935Z" stroke="#831FC1" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </a> `
  }


          
          

            ${userToken ? ` <a class="cart" href="./cart.html">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M35.9594 9.19844C35.842 9.05802 35.6953 8.94509 35.5295 8.8676C35.3637 8.79011 35.183 8.74997 35 8.75H9.79375L8.84375 3.52656C8.79142 3.23854 8.63967 2.97802 8.41495 2.79042C8.19023 2.60282 7.9068 2.50004 7.61406 2.5H3.75C3.41848 2.5 3.10054 2.6317 2.86612 2.86612C2.6317 3.10054 2.5 3.41848 2.5 3.75C2.5 4.08152 2.6317 4.39946 2.86612 4.63388C3.10054 4.8683 3.41848 5 3.75 5H6.5625L10.5562 26.9203C10.6739 27.5704 10.9612 28.1779 11.3891 28.6812C10.7985 29.2328 10.3723 29.9372 10.1576 30.7163C9.94292 31.4953 9.9482 32.3186 10.1729 33.0948C10.3975 33.871 10.8328 34.5699 11.4304 35.1139C12.0279 35.6578 12.7645 36.0256 13.5584 36.1766C14.3522 36.3275 15.1724 36.2555 15.9279 35.9688C16.6834 35.682 17.3447 35.1916 17.8385 34.552C18.3323 33.9123 18.6393 33.1484 18.7255 32.3449C18.8116 31.5414 18.6735 30.7298 18.3266 30H25.4234C25.1438 30.5854 24.9991 31.2262 25 31.875C25 32.7403 25.2566 33.5862 25.7373 34.3056C26.2181 35.0251 26.9013 35.5858 27.7008 35.917C28.5002 36.2481 29.3799 36.3347 30.2285 36.1659C31.0772 35.9971 31.8567 35.5804 32.4686 34.9686C33.0804 34.3567 33.4971 33.5772 33.6659 32.7285C33.8347 31.8799 33.7481 31.0002 33.417 30.2008C33.0858 29.4013 32.5251 28.7181 31.8056 28.2373C31.0862 27.7566 30.2403 27.5 29.375 27.5H14.2453C13.9526 27.5 13.6691 27.3972 13.4444 27.2096C13.2197 27.022 13.068 26.7615 13.0156 26.4734L12.5203 23.75H30.6453C31.5235 23.7499 32.3738 23.4415 33.048 22.8787C33.7221 22.3159 34.1774 21.5344 34.3344 20.6703L36.2344 10.2234C36.2665 10.0429 36.2586 9.85745 36.211 9.6803C36.1635 9.50316 36.0776 9.33865 35.9594 9.19844ZM16.25 31.875C16.25 32.2458 16.14 32.6084 15.934 32.9167C15.728 33.225 15.4351 33.4654 15.0925 33.6073C14.7499 33.7492 14.3729 33.7863 14.0092 33.714C13.6455 33.6416 13.3114 33.463 13.0492 33.2008C12.787 32.9386 12.6084 32.6045 12.536 32.2408C12.4637 31.8771 12.5008 31.5001 12.6427 31.1575C12.7846 30.8149 13.025 30.522 13.3333 30.316C13.6416 30.11 14.0042 30 14.375 30C14.8723 30 15.3492 30.1975 15.7008 30.5492C16.0525 30.9008 16.25 31.3777 16.25 31.875ZM31.25 31.875C31.25 32.2458 31.14 32.6084 30.934 32.9167C30.728 33.225 30.4351 33.4654 30.0925 33.6073C29.7499 33.7492 29.3729 33.7863 29.0092 33.714C28.6455 33.6416 28.3114 33.463 28.0492 33.2008C27.7869 32.9386 27.6084 32.6045 27.536 32.2408C27.4637 31.8771 27.5008 31.5001 27.6427 31.1575C27.7846 30.8149 28.025 30.522 28.3333 30.316C28.6416 30.11 29.0042 30 29.375 30C29.8723 30 30.3492 30.1975 30.7008 30.5492C31.0525 30.9008 31.25 31.3777 31.25 31.875ZM31.875 20.2234C31.8225 20.5122 31.6701 20.7734 31.4444 20.9611C31.2187 21.1488 30.9342 21.2511 30.6406 21.25H12.0656L10.2484 11.25H33.5016L31.875 20.2234Z" fill="#831FC1"></path>
            </svg>

          </a>`: ''
  }
         
        
    
    
    `
)





// * Load Mobile Size Menu ============================================

const menuMobileSize = document.querySelector('.menu-mobile-bottom')
menuMobileSize.innerHTML = ''

menuMobileSize.insertAdjacentHTML('beforeend',
  `
    
    <div class="menu-mobile-items">
      <a href="index.html">
        <span>
          <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18.04 22.75H6.46C3.72 22.75 1.5 20.52 1.5 17.78V10.37C1.5 9.00997 2.34 7.29997 3.42 6.45997L8.81 2.25997C10.43 0.999974 13.02 0.939974 14.7 2.11997L20.88 6.44997C22.07 7.27997 23 9.05997 23 10.51V17.79C23 20.52 20.78 22.75 18.04 22.75ZM9.73 3.43997L4.34 7.63997C3.63 8.19997 3 9.46997 3 10.37V17.78C3 19.69 4.55 21.25 6.46 21.25H18.04C19.95 21.25 21.5 19.7 21.5 17.79V10.51C21.5 9.54997 20.81 8.21997 20.02 7.67997L13.84 3.34997C12.7 2.54997 10.82 2.58997 9.73 3.43997Z" fill="#505050"></path>
            <path d="M12.25 18.75C11.84 18.75 11.5 18.41 11.5 18V15C11.5 14.59 11.84 14.25 12.25 14.25C12.66 14.25 13 14.59 13 15V18C13 18.41 12.66 18.75 12.25 18.75Z" fill="#505050"></path>
          </svg>
        </span>
        خانه
      </a>
    </div>

    <div class="menu-mobile-items">
      <a href="laptop.html">
        <span>
          <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19.75 10.75H17.75C15.33 10.75 14 9.42 14 7V5C14 2.58 15.33 1.25 17.75 1.25H19.75C22.17 1.25 23.5 2.58 23.5 5V7C23.5 9.42 22.17 10.75 19.75 10.75ZM17.75 2.75C16.17 2.75 15.5 3.42 15.5 5V7C15.5 8.58 16.17 9.25 17.75 9.25H19.75C21.33 9.25 22 8.58 22 7V5C22 3.42 21.33 2.75 19.75 2.75H17.75Z" fill="#505050"></path>
            <path d="M7.75 22.75H5.75C3.33 22.75 2 21.42 2 19V17C2 14.58 3.33 13.25 5.75 13.25H7.75C10.17 13.25 11.5 14.58 11.5 17V19C11.5 21.42 10.17 22.75 7.75 22.75ZM5.75 14.75C4.17 14.75 3.5 15.42 3.5 17V19C3.5 20.58 4.17 21.25 5.75 21.25H7.75C9.33 21.25 10 20.58 10 19V17C10 15.42 9.33 14.75 7.75 14.75H5.75Z" fill="#505050"></path>
            <path d="M6.75 10.75C4.13 10.75 2 8.62 2 6C2 3.38 4.13 1.25 6.75 1.25C9.37 1.25 11.5 3.38 11.5 6C11.5 8.62 9.37 10.75 6.75 10.75ZM6.75 2.75C4.96 2.75 3.5 4.21 3.5 6C3.5 7.79 4.96 9.25 6.75 9.25C8.54 9.25 10 7.79 10 6C10 4.21 8.54 2.75 6.75 2.75Z" fill="#505050"></path>
            <path d="M18.75 22.75C16.13 22.75 14 20.62 14 18C14 15.38 16.13 13.25 18.75 13.25C21.37 13.25 23.5 15.38 23.5 18C23.5 20.62 21.37 22.75 18.75 22.75ZM18.75 14.75C16.96 14.75 15.5 16.21 15.5 18C15.5 19.79 16.96 21.25 18.75 21.25C20.54 21.25 22 19.79 22 18C22 16.21 20.54 14.75 18.75 14.75Z" fill="#505050"></path>
          </svg>

        </span>
        دسنته بندی
      </a>
    </div>

    <div class="menu-mobile-items">
      <a href="cart.html">
        <span>
          <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18.44 17.75H7.78999C6.79999 17.75 5.84999 17.33 5.17999 16.6C4.50999 15.87 4.17 14.89 4.25 13.9L5.08 3.94C5.11 3.63 4.99999 3.33001 4.78999 3.10001C4.57999 2.87001 4.29 2.75 3.98 2.75H2.25C1.84 2.75 1.5 2.41 1.5 2C1.5 1.59 1.84 1.25 2.25 1.25H3.99001C4.72001 1.25 5.40999 1.56 5.89999 2.09C6.16999 2.39 6.37 2.74 6.48 3.13H18.97C19.98 3.13 20.91 3.53 21.59 4.25C22.26 4.98 22.6 5.93 22.52 6.94L21.98 14.44C21.87 16.27 20.27 17.75 18.44 17.75ZM6.53 4.62L5.75 14.02C5.7 14.6 5.89 15.15 6.28 15.58C6.67 16.01 7.20999 16.24 7.78999 16.24H18.44C19.48 16.24 20.42 15.36 20.5 14.32L21.04 6.82001C21.08 6.23001 20.89 5.67001 20.5 5.26001C20.11 4.84001 19.57 4.60999 18.98 4.60999H6.53V4.62Z" fill="#505050"></path>
            <path d="M16.5 22.75C15.4 22.75 14.5 21.85 14.5 20.75C14.5 19.65 15.4 18.75 16.5 18.75C17.6 18.75 18.5 19.65 18.5 20.75C18.5 21.85 17.6 22.75 16.5 22.75ZM16.5 20.25C16.22 20.25 16 20.47 16 20.75C16 21.03 16.22 21.25 16.5 21.25C16.78 21.25 17 21.03 17 20.75C17 20.47 16.78 20.25 16.5 20.25Z" fill="#505050"></path>
            <path d="M8.5 22.75C7.4 22.75 6.5 21.85 6.5 20.75C6.5 19.65 7.4 18.75 8.5 18.75C9.6 18.75 10.5 19.65 10.5 20.75C10.5 21.85 9.6 22.75 8.5 22.75ZM8.5 20.25C8.22 20.25 8 20.47 8 20.75C8 21.03 8.22 21.25 8.5 21.25C8.78 21.25 9 21.03 9 20.75C9 20.47 8.78 20.25 8.5 20.25Z" fill="#505050"></path>
            <path d="M21.25 8.75H9.25C8.84 8.75 8.5 8.41 8.5 8C8.5 7.59 8.84 7.25 9.25 7.25H21.25C21.66 7.25 22 7.59 22 8C22 8.41 21.66 8.75 21.25 8.75Z" fill="#505050"></path>
          </svg>


        </span>
        سبد خرید
      </a>
    </div>

    <div class="menu-mobile-items">

    ${userToken ? `
            <a href = "profile.html" >
            <span>
                <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M12.75 12.75C9.58 12.75 7 10.17 7 7C7 3.83 9.58 1.25 12.75 1.25C15.92 1.25 18.5 3.83 18.5 7C18.5 10.17 15.92 12.75 12.75 12.75ZM12.75 2.75C10.41 2.75 8.5 4.66 8.5 7C8.5 9.34 10.41 11.25 12.75 11.25C15.09 11.25 17 9.34 17 7C17 4.66 15.09 2.75 12.75 2.75Z"
                        fill="#505050" />
                    <path
                        d="M21.3401 22.75C20.9301 22.75 20.5901 22.41 20.5901 22C20.5901 18.55 17.0702 15.75 12.7502 15.75C8.43015 15.75 4.91016 18.55 4.91016 22C4.91016 22.41 4.57016 22.75 4.16016 22.75C3.75016 22.75 3.41016 22.41 3.41016 22C3.41016 17.73 7.60015 14.25 12.7502 14.25C17.9002 14.25 22.0901 17.73 22.0901 22C22.0901 22.41 21.7501 22.75 21.3401 22.75Z"
                        fill="#505050" />
                </svg>

            </span>
            
            پروفایل
        </a>
        ` : `
        <a a href = "sign-up.html" >
            <span>
               <img src="./images/logo/user-edit.svg" alt="">
            </span>
            
            ورود یا ثبت نام
        </a> 
        `
  }

    </div>
  
    
    
    `
)







// ! No Deleted
